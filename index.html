<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Multilayer Perceptron Inspection Dashboard</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <header class="title-bar">
        <div class="title-bar-main">Multilayer Perceptron Inspection Dashboard</div>
        <nav class="tab-bar">
            <button class="tab-btn active" data-section="dashboard">Dashboard</button>
            <button class="tab-btn" data-section="inspect">Inspect</button>
            <button class="tab-btn" data-section="info">Information</button>
        </nav>
    </header>
    <main class="main-content">
        <section id="dashboard" class="section active">
            <!-- Dashboard content goes here -->
            <h2>Network Decoding</h2>
            <p class="information">This is an interactive dashboard for exploring Multilayer Perceptron encodings and decision making. When an input is processed through the network, 
                it activates feature encodings on the first network layer. The output layer then combines these feature encodings using a weighted average (feature 
                importance weights are learned during training). The combination of features reconstructs an input pattern with which the input has implicitly been
                compared. Each output node encodes a positive concept and a negative concept. If the input is a closer match to the positive concept than the negative
                concept, then the output node will be activated. Stronger activations indicate greater similarity to the input. Negative concepts serve the role of
                deselecting nodes when the input contains the wrong features.</p>
            <div id="input" class="dashboard-area">
                <h3>Input Selection</h3>
                <p class="information">Select an input and it will be processed through the network.</p>
                <span id="input-spinner" class="spinner" style="display: inline-block;"></span>
                <span style="display: inline-block;">Input Label:</span>
                <span id="input-number-label" style="font-weight: bold; display: inline-block;"></span>
                <div id="input-data" class="input-table" style="display: none;">
                    <svg id="input-svg" class="input-cell" width="112px" height="112px" viewbox="0 0 56 56"></svg>
                    <label class="input-cell" width="112px" style="font-weight: bold;">
                        <input id="input-number" type="number" min="1" max="10000" step="1">
                        Select Input
                    </label>
                </div>
            </div>
            <div id="output" class="dashboard-area">
                <h3>Network Output</h3>
                <p class="information">Here are the network's maximum prediction and output node activations. Use the toggles to select the decodings to visualise.</p>
                <span style="display: inline-block;">Prediction:</span>
                <span id="output-prediction-label" style="font-weight: bold; display: inline-block;"></span>
                <br/>
                <div class="grid-table-output-10">
                    <span id="output-0" class="top-cell"></span>
                    <span id="output-1" class="top-cell"></span>
                    <span id="output-2" class="top-cell"></span>
                    <span id="output-3" class="top-cell"></span>
                    <span id="output-4" class="top-cell"></span>
                    <span id="output-5" class="top-cell"></span>
                    <span id="output-6" class="top-cell"></span>
                    <span id="output-7" class="top-cell"></span>
                    <span id="output-8" class="top-cell"></span>
                    <span id="output-9" class="top-cell"></span>
                    <span class="middle-cell">0</span>
                    <span class="middle-cell">1</span>
                    <span class="middle-cell">2</span>
                    <span class="middle-cell">3</span>
                    <span class="middle-cell">4</span>
                    <span class="middle-cell">5</span>
                    <span class="middle-cell">6</span>
                    <span class="middle-cell">7</span>
                    <span class="middle-cell">8</span>
                    <span class="middle-cell">9</span>
                    <div class="bottom-cell">
                        <label class="switch">
                            <input type="checkbox" id="show-activations-0" class="top-down-toggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="bottom-cell">
                        <label class="switch">
                            <input type="checkbox" id="show-activations-1" class="top-down-toggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="bottom-cell">
                        <label class="switch">
                            <input type="checkbox" id="show-activations-2" class="top-down-toggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="bottom-cell">
                        <label class="switch">
                            <input type="checkbox" id="show-activations-3" class="top-down-toggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="bottom-cell">
                        <label class="switch">
                            <input type="checkbox" id="show-activations-4" class="top-down-toggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="bottom-cell">
                        <label class="switch">
                            <input type="checkbox" id="show-activations-5" class="top-down-toggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="bottom-cell">
                        <label class="switch">
                            <input type="checkbox" id="show-activations-6" class="top-down-toggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="bottom-cell">
                        <label class="switch">
                            <input type="checkbox" id="show-activations-7" class="top-down-toggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="bottom-cell">
                        <label class="switch">
                            <input type="checkbox" id="show-activations-8" class="top-down-toggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                    <div class="bottom-cell">
                        <label class="switch">
                            <input type="checkbox" id="show-activations-9" class="top-down-toggle" checked>
                            <span class="slider round"></span>
                        </label>
                    </div>
                </div>
            </div>
            <div id="decoded" class="dashboard-area">
                <h3>Decoded Memory</h3>
                <p class="information">Here are the decoded representations. Global normalisation will show the relative activation in terms of brightness. Local normalisation will make the decoding more visible.</p>
                <p class="information">The decodings show the positive encodings for the selected outputs (this is the most important). The negative encoding is also shown (this is primarily to deselect a node). 
                    The critical column shows the combination of positive and negative encodings, showing which features are critical in the decision to activate the node.</p>
                <p class="information">Below the encodings are input saliency maps, showing how well the input matches the encoding. Below that are the maximum similarity training instances to the decoded representation.
                    These can be useful when the network's encoded representation is unclear.</p>
                <div class="switch-container">
                    <span style="font-weight: bold;">Normalisation: </span>
                    <span>Local</span>
                    <label class="switch">
                        <input type="checkbox" id="norms-toggle" checked>
                        <span class="slider round"></span>
                    </label>
                    <span>Global</span>
                </div>
                <div class="grid-table-output-4">
                    <span class="top-cell" style="font-weight: bold;">Positive</span>
                    <span class="top-cell" style="font-weight: bold;">Negative</span>
                    <span class="top-cell" style="font-weight: bold;">Critical</span>
                    <span class="top-cell"></span>
                    <span class="middle-cell">
                        <svg id="decoded-positive-svg" width="140px" height="140px" viewbox="0 0 140 140"></svg>
                    </span>
                    <span class="middle-cell">
                        <svg id="decoded-negative-svg" width="140px" height="140px" viewbox="0 0 140 140"></svg>
                    </span>
                    <span class="middle-cell">
                        <svg id="decoded-hyperplane-svg" width="140px" height="140px" viewbox="0 0 140 140"></svg>
                    </span>
                    <span class="middle-cell" style="font-weight: bold;">Decoding</span>
                    <span class="middle-cell">
                        <svg id="saliency-positive-svg" width="140px" height="140px" viewbox="0 0 140 140"></svg>
                    </span>
                    <span class="middle-cell">
                        <svg id="saliency-negative-svg" width="140px" height="140px" viewbox="0 0 140 140"></svg>
                    </span>
                    <span class="middle-cell">
                        <svg id="saliency-hyperplane-svg" width="140px" height="140px" viewbox="0 0 140 140"></svg>
                    </span>
                    <span class="middle-cell" style="font-weight: bold;">Input Saliency</span>
                    <span class="bottom-cell">
                        <span class="spinner max-sim"></span>
                        <svg id="max-positive-svg" width="112px" height="168px" viewbox="0 0 112 168"></svg>
                    </span>
                    <span class="bottom-cell">
                        <div style="height: 168px;"></div>
                        <span class="spinner max-sim"></span>
                        <svg id="max-negative-svg" width="112px" height="168px" viewbox="0 0 112 168"></svg>
                    </span>
                    <span class="bottom-cell">
                        <span class="spinner max-sim"></span>
                        <svg id="max-hyperplane-svg" width="112px" height="168px" viewbox="0 0 112 168"></svg>
                    </span>
                    <span class="bottom-cell" style="font-weight: bold;">Max Similarity</span>
                </div>
            </div>
            <div id="histogram" class="dashboard-area">
                <h3>Features Histogram</h3>
            </div>
        </section>
        <section id="inspect" class="section">
            <!-- Inspect content goes here -->
            <h2>Inspect</h2>
            <div id="encoding_features">
                <span id="feature-spinner" class="spinner" style="display: inline-block;"></span>
            </div>
            <div id="encoding-tooltip" style="display:none; position:fixed; z-index:9999;"></div>
        </section>
        <section id="info" class="section">
            <!-- Information content goes here -->
            <h2>Information</h2>
            <p>Find information and documentation about this dashboard.</p>
        </section>
        <section class="aside">
            <h2>Controls</h2>
            <div class="switch-container">
                <span>Show Information:</span>
                <label class="switch">
                    <input type="checkbox" id="info-toggle" checked>
                    <span class="slider round"></span>
                </label>
            </div>
            <p>Click on encodings to combine them...</p>
            <div id="controls" class="aside-area">
                <div class="control-box">
                    <h3>Manual Selection</h3>
                    <svg id="manual-svg" viewbox="0 0 140 140"></svg>
                    <button class="modern-btn">Reset</button>
                </div>
                <div class="control-box">
                    <h3>Network Selection</h3>
                    <svg id="decode-svg" viewbox="0 0 140 140"></svg>
                    <button class="modern-btn">Reset</button>
                </div>
            </div>
            <div id="information" class="aside-area information">
                <h2>Information</h2>
                <p>Find information and documentation about this dashboard.</p>
            </div>
        </section>
    </main>
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
    <script src="js/navigation.js"></script>
    <script type="module" src="js/init.js"></script>
    <script type="module" src="js/draw_weights.js"></script>
    <script type="module" src="js/interactions.js"></script>
    <script type="module" src="js/mnist.js"></script>
    <script type="module" src="js/run_model.js"></script>
    <script type="module" src="js/generate_images.js"></script>
</body>
</html>
